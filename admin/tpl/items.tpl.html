<div ng-app="akva" ng-controller="ItemsController">
    <h1>Товары</h1>
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Список товаров</h3>
                    <div class="row">
                        <div class="col-md-2">Размер страницы:
                            <select ng-model="entryLimit" class="form-control">
                                <option>5</option>
                                <option>10</option>
                                <option>20</option>
                                <option>50</option>
                                <option>100</option>
                                <option>200</option>
                            </select>
                        </div>
                        <div class="col-md-3">Фильтр:
                            <input type="text" ng-model="search" ng-change="filter()" placeholder="Поиск товара..." class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <h5>Найдено {{ filtered.length }} из {{ totalItems}} товаров</h5>
                        </div>
                    </div>
                    <div class="text-right">
                        <span><span ng-if="recentLoading">загрузка</span>Страница {{(currentPage )}} </span>
                        <button class="btn btn-primary btn-xs" ng-disabled="currentPage <= 1" ng-click="setPage(currentPage - 1)"><span class="glyphicon glyphicon-chevron-left"></span></button>
                        <button class="btn btn-primary btn-xs" ng-click="setPage(currentPage + 1)"><span class="glyphicon glyphicon-chevron-right"></span></button>
                    </div>
                    <div class="col-md-12" ng-show="filteredItems > 0">
                        <div pagination="" page="currentPage" on-select-page="setPage(page)" boundary-links="true" total-items="filteredItems" items-per-page="entryLimit" class="pagination-small" previous-text="&laquo;" next-text="&raquo;"></div>
                    </div>
                    <br />
                </div>
                <!-- /.box-header -->
                    <div style="overflow:auto" class="box-body">
                        <table id="allItems" class="table table-bordered">
                            <thead>
                            <tr>
                                <th>ID<a ng-click="predicate='id'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a> </th>
                                <th>Фото<a ng-click="predicate='img'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a> </th>
                                <th>SKU<a ng-click="predicate='sku'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a> </th>
                                <th>Артикул<a ng-click="predicate='id_sku'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a> </th>
                                <!--                                 <th>Група<a ng-click="predicate='groupname'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a> </th>
                                                                <th>Подгрупа<a ng-click="predicate='groupname'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a> </th> -->
                                <th>Бренд&nbsp;<a ng-click="predicate='vendor'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a> </th>
                                <th>Серия&nbsp;<a ng-click="predicate='servies'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a> </th>
                                <th>Название&nbsp;<a ng-click="predicate='name'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a> </th>
                                <th>Описание&nbsp;<a class="editable-cell" ng-click="predicate='description'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a></th>
                                <th>Медиа<a class="editable-cell" ng-click="predicate='media'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a></th>

                                <!--                                <th>Статус&nbsp;<a ng-click="predicate='status'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a></th>-->
                                <th>Остаток&nbsp<a ng-click="predicate='inventory'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a>
                                </th>
                                <th>Цена&nbsp;<a ng-click="predicate='price'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a>
                                <th>Цена(скидка)<a ng-click="predicate='discount_price'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a>
                                    <!--                                <th>Cкидка<a ng-click="predicate='is_sale'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a>-->
                                    <!--                                <th>Вес<a ng-click="predicate='weight'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a>-->
                                    <!--                                </th>-->
                                    <!--&lt;!&ndash;                                <th>Валюта&nbsp;<a ng-click="predicate='currency'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a></th>&ndash;&gt;-->
                                    <!--                                <th>Доступен&nbsp;<a ng-click="predicate='available'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a>-->
                                    <!--                                </th>-->
                                    <!--                                <th>БрендID<a ng-click="predicate='brandId'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a>-->
                                    <!--                                <th>Подкатегория<a ng-click="predicate='subCategoryId'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a>-->
                                <th>Категория (подкат.)<a ng-click="predicate='categoryId'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a>
                                    <!--                                <th>Коллекция<a ng-click="predicate='collectionId'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a>-->
                                <th>Тренд<a ng-click="predicate='trend'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a></th>
                                <th>Хит<a ng-click="predicate='hit'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a></th>
                                <th>Новый<a ng-click="predicate='new'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a></th>
                                <th>Акция<a ng-click="predicate='sale'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a></th>
                                <th>Создан&nbsp;<a ng-click="predicate='created'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a></th>
                                <th>Обновлен&nbsp;<a ng-click="predicate='modified'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i></a></th>
                                <th style="width:5%">Редактировать</th>
                                <!--                                <th style="width:5%">Обновить</th>-->
                                <!--                            <th style="width:5%">Покупают вместе</th>
                                                                <th style="width:5%">Настройка доставка</th> -->
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="item in filtered = (products | filter:search | orderBy : predicate :reverse) | startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit">
                                <!-- <td><a target="_blank" href="#/template/view/{{tla}}/{{template.id}}">{{item.sku}}</a></td> -->
                                <td>{{item.id}}</td>
                                <td style="width: 150px; "><img ng-src="{{item.img}}" width="100%" alt="antey"/></td>
                                <td>{{item.sku}}</td>
                                <td>{{item.id_sku}}</td>
                                <td>{{item.vendor}} ({{item.brandId}})</td>
                                <td>{{item.series}}</td>
                                <td>{{item.name}}</td>
                                <td>
                                    <div ng-hide="editingData[item.id]">{{item.description}}</div>
                                    <div ng-show="editingData[item.id]">
                                        <textarea style="width:100%" ng-model="item.description"></textarea>
                                    </div>
                                </td>
                                <td>
                                    <div ng-hide="editingData[item.id]">{{item.media}}</div>
                                    <div ng-show="editingData[item.id]">
                                        <textarea style="width:100%" ng-model="item.media"></textarea>
                                    </div>
                                </td>
                                <!--                                <td>{{item.status}}</td>-->
                                <td>{{item.inventory}}</td>
                                <td>{{item.price}}</td>
                                <td>{{item.discount_price}}</td>
                                <!--                                <td>{{item.is_sale}}</td>-->
                                <!--                                <td>{{item.weight}}</td>-->
                                <!--&lt;!&ndash;                                <td>{{item.currency}}</td>&ndash;&gt;-->
                                <!--                                <td>{{item.available}}</td>-->
                                <!--                                <td></td>-->
                                <td>{{item.categoryId}} ({{item.subCategoryId}})</td>
                                <!--                                <td></td>-->
                                <!--                                <td>-->
                                <!--                                    <div ng-hide="editingData[item.id]">{{item.collectionId}}</div>-->
                                <!--                                    <div ng-show="editingData[item.id]">-->
                                <!--                                        <select ng-model="collection" ng-change="handleCollectionChange(collection)" class="form-control">-->
                                <!--                                            <option value=1>Хиты продаж</option>-->
                                <!--                                            <option value=3>Тренды</option>-->
                                <!--                                        </select>-->
                                <!--                                    </div>-->
                                <!--                                </td>-->
                                <td><input type="checkbox" ng-checked="item.trend" ng-model="item.trend" ng-change="enableTrend(item.id, item.trend)"/></td>
                                <td><input type="checkbox" ng-checked="item.hit" ng-model="item.hit" ng-change="enableHit(item.id, item.hit)"/></td>
                                <td><input type="checkbox" ng-checked="item.new" ng-model="item.new" ng-change="enableNew(item.id, item.new)"/></td>
                                <td><input type="checkbox" ng-checked="item.sale" ng-model="item.sale" ng-change="enableSale(item.id, item.sale)"/></td>
                                <td>{{item.created}}</td>
                                <td>{{item.modified}}</td>
                                <td>
                                    <button ng-hide="editingData[item.id]" class="btn btn-warning btn-sm" ng-click="modify(item)">Изменить</button>
                                    <button ng-show="editingData[item.id]" class="btn btn-success btn-sm" ng-click="update(item)">Обновить</button>
                                </td>
                            </tr>
                            </tbody>
                            <!--</tfoot>-->
                        </table>
                    </div>
                    <!-- /.box-body -->

            </div>
            <!-- /.box -->
        </div>
        <!-- /.col -->
    </div>
</div>